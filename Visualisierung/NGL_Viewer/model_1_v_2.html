<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>1 vs 2 Interaktion – parametrisch</title>
  <style>
    body { margin: 0; font-family: sans-serif; background: #111; color: white; }
    #viewport { width: 100vw; height: 90vh; }
    #controls { text-align: center; margin-top: 10px; }
    input[type=range] { width: 200px; }
    label { margin: 0 10px; display: inline-block; width: 80px; text-align: right; }
  </style>
  <script src="./ngl.js"></script>
</head>
<body>
  <div id="viewport"></div>
  <div id="controls">
    <div>
      <label>d_AB</label>
      <input type="range" id="dAB" min="1" max="10" step="0.1" value="4">
      <span id="valAB">4.0</span>
    </div>
    <div>
      <label>d_AC</label>
      <input type="range" id="dAC" min="1" max="10" step="0.1" value="3">
      <span id="valAC">3.0</span>
    </div>
    <div>
      <label>Winkel</label>
      <input type="range" id="angle" min="10" max="170" step="1" value="60">
      <span id="valAngle">60°</span>
    </div>
  </div>

  <script>
    const stage = new NGL.Stage("viewport", { backgroundColor: "black" });
    window.addEventListener("resize", () => stage.handleResize(), false);

    let dAB = 4.0;
    let dAC = 3.0;
    let angleA = 60.0;

    const A = [0, 0, 0];
    let B, C;

    let shape, comp;

    function updateGeometry() {
      // B und C berechnen (in der xy-Ebene)
      const rad = angleA * Math.PI / 180;
      B = [dAB, 0, 0];
      C = [dAC * Math.cos(rad), dAC * Math.sin(rad), 0];

      if (shape) shape.dispose();
      if (comp) comp.dispose();

      shape = new NGL.Shape("1vs2");

      // Punkte
      shape.addSphere(A, [1, 0, 0], 0.3, "A");
      shape.addSphere(B, [0, 1, 0], 0.3, "B");
      shape.addSphere(C, [0, 0, 1], 0.3, "C");

      // Linien
      shape.addCylinder(A, B, [1, 1, 0], 0.05, "A–B");
      shape.addCylinder(A, C, [1, 1, 0], 0.05, "A–C");
      shape.addCylinder(B, C, [1, 1, 1], 0.05, "B–C");

      // Label für Winkel
      shape.addText([A[0], A[1]+0.7, A[2]], [1,1,0], 0.6, `${angleA.toFixed(1)}°`);

      comp = stage.addComponentFromObject(shape);
      comp.addRepresentation("buffer");
      stage.autoView();
    }

    // === Initial zeichnen ===
    updateGeometry();

    // === Slider-Events ===
    const sAB = document.getElementById("dAB");
    const sAC = document.getElementById("dAC");
    const sAngle = document.getElementById("angle");
    const vAB = document.getElementById("valAB");
    const vAC = document.getElementById("valAC");
    const vAngle = document.getElementById("valAngle");

    function onChange() {
      dAB = parseFloat(sAB.value);
      dAC = parseFloat(sAC.value);
      angleA = parseFloat(sAngle.value);
      vAB.textContent = dAB.toFixed(1);
      vAC.textContent = dAC.toFixed(1);
      vAngle.textContent = `${angleA.toFixed(0)}°`;
      updateGeometry();
    }

    sAB.addEventListener("input", onChange);
    sAC.addEventListener("input", onChange);
    sAngle.addEventListener("input", onChange);
  </script>
</body>
</html>
